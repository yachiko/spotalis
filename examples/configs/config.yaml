# Spotalis Development Configuration
# This configuration is optimized for local development and testing

operator:
  namespace: "spotalis-system"
  leaderElection:
    enabled: false  # Disable leader election for single instance development
    id: "spotalis-controller-leader"
    namespace: "spotalis-system"
  readOnlyMode: false
  
  # Global disruption window (optional)
  # Defines when pod disruptions (rebalancing) are allowed
  # Can be overridden at namespace or workload level using annotations
  disruptionWindow:
    schedule: "0 2 * * *"  # Daily at 2 AM UTC (5-field cron expression)
    duration: "4h"         # 4-hour window (2 AM - 6 AM UTC)

controllers:
  reconcileInterval: "30s"  # Faster reconciliation for development
  maxConcurrentReconciles: 1
  rateLimit:
    qps: 100.0
    burst: 150
  
  # Node classifier configuration
  # Defines how to identify spot vs on-demand nodes
  nodeClassifier:
    # Label selectors for spot nodes
    spotLabels:
      - matchLabels:
          karpenter.sh/capacity-type: "spot"
    
    # Label selectors for on-demand nodes
    onDemandLabels:
      - matchLabels:
          karpenter.sh/capacity-type: "on-demand"

webhook:
  enabled: true
  port: 9443
  certDir: "/tmp/k8s-webhook-server/serving-certs"
  certName: "tls.crt"
  keyName: "tls.key"

observability:
  logging:
    level: "info"
    format: "json"  # Use JSON format for structured logging
    output: "stdout"  # Log to standard output
    addCaller: true   # Include caller information
    development: false  # Production mode
  metrics:
    enabled: true
    bindAddress: ":8080"
    path: "/metrics"
  health:
    enabled: true
    bindAddress: ":8081"
    path: "/healthz"